const translations = {
    'zh-CN': {
        title: '币安Alpha活动统计',
        download: '下载币安',
        footerText: '获取最新币安Alpha活动、空投和TGE信息',
        date: '日期',
        project: '项目',
        type: '类型',
        marketCap: '上线流通市值',
        benefit: '收益',
        total: '总收益',
        totalWithMonth: '{month}月总收益',
        airdrop: '空投',
        tge: '打新',
        unit: {
            million: 'M：百万',
            currency: '单位：美金'
        },
        month: {
            all: '全部',
            1: '1月',
            2: '2月',
            3: '3月',
            4: '4月',
            5: '5月',
            6: '6月',
            7: '7月',
            8: '8月',
            9: '9月',
            10: '10月',
            11: '11月',
            12: '12月'
        },
        seo: {
            title: '币安Alpha活动统计 - 空投、TGE最新情报 | Binance',
            description: '币安Alpha活动汇总：最新空投信息、TGE打新机会。获取币安平台独家Alpha情报，掌握币圈投资先机。加入币安，发现更多数字货币投资机会。',
            keywords: '币安,Binance,币安Alpha,币安空投,币安TGE,币安打新,加密货币,数字货币投资,币圈投资,币安注册,Binance注册,币安返佣',
            siteName: '币安Alpha活动统计'
        }
    },
    'en-US': {
        title: 'Binance Alpha Events Analytics',
        download: 'Download Binance',
        footerText: 'Get the latest Binance Alpha events, airdrops and TGE information',
        date: 'Date',
        project: 'Project',
        type: 'Type',
        marketCap: 'Initial Market Cap',
        benefit: 'Profit',
        total: 'Total Profit',
        totalWithMonth: '{month} Total Profit',
        airdrop: 'Airdrop',
        tge: 'TGE',
        unit: {
            million: 'M: Million',
            currency: 'Unit: USD'
        },
        month: {
            all: 'All',
            1: 'Jan',
            2: 'Feb',
            3: 'Mar',
            4: 'Apr',
            5: 'May',
            6: 'Jun',
            7: 'Jul',
            8: 'Aug',
            9: 'Sep',
            10: 'Oct',
            11: 'Nov',
            12: 'Dec'
        },
        seo: {
            title: 'Binance Alpha Events Analytics - Airdrops & TGE Opportunities | Binance',
            description: 'Discover Binance Alpha events: Latest airdrops and TGE opportunities. Get exclusive Alpha insights from Binance platform. Join Binance for more crypto investment opportunities.',
            keywords: 'Binance,Binance Alpha,Binance Airdrops,Binance TGE,crypto investment,cryptocurrency,Binance registration,Binance referral,crypto trading',
            siteName: 'Binance Alpha Events Analytics'
        }
    },
    'ja-JP': {
        title: 'バイナンスアルファイベント分析',
        download: 'バイナンスをダウンロード',
        footerText: '最新のバイナンスアルファイベント、エアドロップ、TGE情報を入手',
        date: '日付',
        project: 'プロジェクト',
        type: 'タイプ',
        marketCap: '初期時価総額',
        benefit: '利益',
        total: '合計利益',
        totalWithMonth: '{month}月の合計利益',
        airdrop: 'エアドロップ',
        tge: 'TGE',
        unit: {
            million: 'M: 百万',
            currency: '単位: USD'
        },
        month: {
            all: 'すべて',
            1: '1月',
            2: '2月',
            3: '3月',
            4: '4月',
            5: '5月',
            6: '6月',
            7: '7月',
            8: '8月',
            9: '9月',
            10: '10月',
            11: '11月',
            12: '12月'
        },
        seo: {
            title: 'バイナンスアルファイベント分析 - エアドロップ・TGE情報 | Binance',
            description: 'バイナンスアルファイベントの総合情報：最新のエアドロップ情報とTGEの機会。バイナンスプラットフォームで独占アルファ情報を入手し、暗号資産投資のチャンスを掴みましょう。',
            keywords: 'バイナンス,Binance,バイナンスアルファ,エアドロップ,TGE,暗号資産,仮想通貨投資,バイナンス登録,Binanceボーナス',
            siteName: 'バイナンスアルファイベント分析'
        }
    },
    'ko-KR': {
        title: '바이낸스 알파 이벤트 통계',
        download: '바이낸스 다운로드',
        footerText: '최신 바이낸스 알파 이벤트, 에어드롭 및 TGE 정보 확인',
        date: '날짜',
        project: '프로젝트',
        type: '유형',
        marketCap: '초기 시가총액',
        benefit: '수익',
        total: '총 수익',
        totalWithMonth: '{month}월 총 수익',
        airdrop: '에어드롭',
        tge: 'TGE',
        unit: {
            million: 'M: 백만',
            currency: '단위: USD'
        },
        month: {
            all: '전체',
            1: '1월',
            2: '2월',
            3: '3월',
            4: '4월',
            5: '5월',
            6: '6월',
            7: '7월',
            8: '8월',
            9: '9월',
            10: '10월',
            11: '11월',
            12: '12월'
        },
        seo: {
            title: '바이낸스 알파 이벤트 통계 - 에어드롭 및 TGE 정보 | Binance',
            description: '바이낸스 알파 이벤트 종합: 최신 에어드롭 정보와 TGE 기회. 바이낸스 플랫폼의 독점 알파 정보로 암호화폐 투자의 기회를 잡으세요.',
            keywords: '바이낸스,Binance,바이낸스 알파,에어드롭,TGE,암호화폐,가상화폐 투자,바이낸스 가입,바이낸스 추천',
            siteName: '바이낸스 알파 이벤트 통계'
        }
    },
    'fr-FR': {
        title: 'Statistiques des Événements Binance Alpha',
        download: 'Télécharger Binance',
        footerText: 'Obtenez les dernières informations sur les événements Binance Alpha, airdrops et TGE',
        date: 'Date',
        project: 'Projet',
        type: 'Type',
        marketCap: 'Capitalisation initiale',
        benefit: 'Profit',
        total: 'Profit total',
        totalWithMonth: 'Profit total de {month}',
        airdrop: 'Airdrop',
        tge: 'TGE',
        unit: {
            million: 'M: Million',
            currency: 'Unité: USD'
        },
        month: {
            all: 'Tout',
            1: 'Jan',
            2: 'Fév',
            3: 'Mar',
            4: 'Avr',
            5: 'Mai',
            6: 'Juin',
            7: 'Juil',
            8: 'Août',
            9: 'Sep',
            10: 'Oct',
            11: 'Nov',
            12: 'Déc'
        },
        seo: {
            title: 'Statistiques des Événements Binance Alpha - Airdrops et Opportunités TGE | Binance',
            description: 'Découvrez les événements Binance Alpha : Derniers airdrops et opportunités TGE. Obtenez des informations exclusives sur la plateforme Binance. Rejoignez Binance pour plus d\'opportunités d\'investissement crypto.',
            keywords: 'Binance,Alpha Binance,Airdrops Binance,TGE Binance,investissement crypto,cryptomonnaie,inscription Binance,parrainage Binance',
            siteName: 'Statistiques des Événements Binance Alpha'
        }
    },
    'de-DE': {
        title: 'Binance Alpha Events Statistiken',
        download: 'Binance herunterladen',
        footerText: 'Erhalten Sie die neuesten Informationen zu Binance Alpha Events, Airdrops und TGE',
        date: 'Datum',
        project: 'Projekt',
        type: 'Typ',
        marketCap: 'Anfängliche Marktkapitalisierung',
        benefit: 'Gewinn',
        total: 'Gesamtgewinn',
        totalWithMonth: 'Gesamtgewinn {month}',
        airdrop: 'Airdrop',
        tge: 'TGE',
        unit: {
            million: 'M: Million',
            currency: 'Einheit: USD'
        },
        month: {
            all: 'Alle',
            1: 'Jan',
            2: 'Feb',
            3: 'Mär',
            4: 'Apr',
            5: 'Mai',
            6: 'Jun',
            7: 'Jul',
            8: 'Aug',
            9: 'Sep',
            10: 'Okt',
            11: 'Nov',
            12: 'Dez'
        },
        seo: {
            title: 'Binance Alpha Events Statistiken - Airdrops & TGE-Möglichkeiten | Binance',
            description: 'Entdecken Sie Binance Alpha Events: Aktuelle Airdrops und TGE-Möglichkeiten. Erhalten Sie exklusive Alpha-Einblicke von der Binance-Plattform. Mehr Krypto-Investment-Chancen mit Binance.',
            keywords: 'Binance,Binance Alpha,Binance Airdrops,Binance TGE,Krypto-Investment,Kryptowährung,Binance Anmeldung,Binance Empfehlung',
            siteName: 'Binance Alpha Events Statistiken'
        }
    },
    'es-ES': {
        title: 'Estadísticas de Eventos Binance Alpha',
        download: 'Descargar Binance',
        footerText: 'Obtenga la última información sobre eventos Binance Alpha, airdrops y TGE',
        date: 'Fecha',
        project: 'Proyecto',
        type: 'Tipo',
        marketCap: 'Capitalización inicial',
        benefit: 'Beneficio',
        total: 'Beneficio total',
        totalWithMonth: 'Beneficio total de {month}',
        airdrop: 'Airdrop',
        tge: 'TGE',
        unit: {
            million: 'M: Millón',
            currency: 'Unidad: USD'
        },
        month: {
            all: 'Todo',
            1: 'Ene',
            2: 'Feb',
            3: 'Mar',
            4: 'Abr',
            5: 'May',
            6: 'Jun',
            7: 'Jul',
            8: 'Ago',
            9: 'Sep',
            10: 'Oct',
            11: 'Nov',
            12: 'Dic'
        },
        seo: {
            title: 'Estadísticas de Eventos Binance Alpha - Airdrops y Oportunidades TGE | Binance',
            description: 'Descubra los eventos Binance Alpha: Últimos airdrops y oportunidades TGE. Obtenga información exclusiva Alpha en la plataforma Binance. Únase a Binance para más oportunidades de inversión en criptomonedas.',
            keywords: 'Binance,Binance Alpha,Airdrops Binance,TGE Binance,inversión cripto,criptomonedas,registro Binance,referido Binance',
            siteName: 'Estadísticas de Eventos Binance Alpha'
        }
    },
    'ru-RU': {
        title: 'События Binance Alpha',
        download: 'Скачать Binance',
        footerText: 'Получайте последнюю информацию о событиях Binance Alpha, airdrop и TGE',
        date: 'Дата',
        project: 'Проект',
        type: 'Тип',
        marketCap: 'Начальная капитализация',
        benefit: 'Прибыль',
        total: 'Общая прибыль',
        totalWithMonth: 'Общая прибыль за {month}',
        airdrop: 'Airdrop',
        tge: 'TGE',
        unit: {
            million: 'M: Миллион',
            currency: 'Единица: USD'
        },
        month: {
            all: 'Все',
            1: 'Янв',
            2: 'Фев',
            3: 'Мар',
            4: 'Апр',
            5: 'Май',
            6: 'Июн',
            7: 'Июл',
            8: 'Авг',
            9: 'Сен',
            10: 'Окт',
            11: 'Ноя',
            12: 'Дек'
        },
        seo: {
            title: 'События Binance Alpha - Airdrop и TGE возможности | Binance',
            description: 'Откройте для себя события Binance Alpha: Последние airdrop и TGE возможности. Получите эксклюзивную Alpha информацию на платформе Binance. Присоединяйтесь к Binance для новых крипто-возможностей.',
            keywords: 'Binance,Binance Alpha,Binance Airdrop,Binance TGE,крипто-инвестиции,криптовалюта,регистрация Binance,реферал Binance',
            siteName: 'События Binance Alpha'
        }
    }
};

// 获取浏览器语言
function getBrowserLanguage() {
    try {
        // 先检查本地存储中是否有保存的语言选择
        const savedLanguage = localStorage.getItem('preferredLanguage');
        if (savedLanguage && translations[savedLanguage]) {
            return savedLanguage;
        }
    } catch (e) {
        console.warn('Failed to read language preference:', e);
    }

    const language = navigator.language || navigator.userLanguage;
    const shortLang = language.split('-')[0];
    
    // 检查完整语言代码
    if (translations[language]) {
        return language;
    }
    
    // 检查简短语言代码
    const fullLang = Object.keys(translations).find(key => key.startsWith(shortLang));
    if (fullLang) {
        return fullLang;
    }
    
    // 默认返回英语
    return 'en-US';
}

// 当前语言
let currentLanguage = getBrowserLanguage();

// 获取翻译文本
function t(key) {
    const keys = key.split('.');
    let value = translations[currentLanguage];
    
    for (const k of keys) {
        value = value[k];
        if (!value) break;
    }
    
    return value || key;
}

// 切换语言
function setLanguage(lang) {
    if (translations[lang]) {
        currentLanguage = lang;
        // 保存语言选择到本地存储
        try {
            localStorage.setItem('preferredLanguage', lang);
        } catch (e) {
            console.warn('Failed to save language preference:', e);
        }
        updatePageContent();
    }
}

// 更新页面内容
function updatePageContent() {
    const lang = currentLanguage;
    
    // 更新SEO元标签
    document.title = translations[lang].seo.title;
    document.getElementById('metaDescription').content = translations[lang].seo.description;
    document.getElementById('metaKeywords').content = translations[lang].seo.keywords;
    document.getElementById('ogTitle').content = translations[lang].seo.title;
    document.getElementById('ogDescription').content = translations[lang].seo.description;
    document.getElementById('ogSiteName').content = translations[lang].seo.siteName;
    document.getElementById('twitterTitle').content = translations[lang].seo.title;
    document.getElementById('twitterDescription').content = translations[lang].seo.description;
    document.getElementById('pageTitle').textContent = translations[lang].seo.title;

    // 更新结构化数据
    const structuredData = {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": translations[lang].seo.siteName,
        "description": translations[lang].seo.description,
        "publisher": {
            "@type": "Organization",
            "name": "Binance",
            "logo": {
                "@type": "ImageObject",
                "url": "https://www.binance.com/logo.png"
            }
        },
        "mainEntity": {
            "@type": "ItemList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": 1,
                    "name": translations[lang].airdrop,
                    "description": translations[lang].seo.description
                },
                {
                    "@type": "ListItem",
                    "position": 2,
                    "name": "TGE",
                    "description": translations[lang].seo.description
                }
            ]
        }
    };
    document.getElementById('structuredData').textContent = JSON.stringify(structuredData);

    // 更新HTML语言属性
    document.documentElement.lang = lang;
    
    // 更新标题
    document.querySelector('h1').textContent = t('title');
    
    // 更新下载按钮
    const downloadText = document.querySelector('.download-text');
    if (downloadText) {
        downloadText.textContent = t('download');
    }
    
    // 更新表头
    const headers = document.querySelectorAll('th');
    headers[0].textContent = t('date');
    headers[1].textContent = t('project');
    headers[2].textContent = t('type');
    headers[3].textContent = t('benefit');
    
    // 更新类型文本
    document.querySelectorAll('.table-type').forEach(type => {
        const typeKey = type.getAttribute('data-type');
        type.textContent = t(typeKey);
    });
    
    // 更新月份按钮
    document.querySelectorAll('.month-btn').forEach(btn => {
        const month = btn.getAttribute('data-month');
        btn.textContent = t(`month.${month}`);
    });
    
    // 更新合计行
    const totalRow = document.querySelector('.total-row');
    if (totalRow) {
        // 获取当前月份
        const monthBtn = document.querySelector('.month-btn.active');
        const month = monthBtn ? parseInt(monthBtn.getAttribute('data-month')) : 5;
        const monthText = t(`month.${month}`).replace('月', '');
        const totalText = t('totalWithMonth').replace('{month}', monthText);
        totalRow.querySelector('.total-label').textContent = totalText;
    }

    // 更新页脚文本
    const footerText = document.getElementById('footerText');
    if (footerText) {
        footerText.textContent = t('footerText');
    }
}

// 添加语言切换按钮
function addLanguageSwitcher() {
    console.log('Adding language switcher');
    
    // 检查是否已存在语言切换器
    const existingSwitcher = document.querySelector('.language-switcher');
    if (existingSwitcher) {
        console.log('Language switcher already exists');
        return;
    }

    const switcher = document.createElement('div');
    switcher.className = 'language-switcher';
    
    const languages = {
        'zh-CN': '中文',
        'en-US': 'English',
        'ja-JP': '日本語',
        'ko-KR': '한국어',
        'fr-FR': 'Français',
        'de-DE': 'Deutsch',
        'es-ES': 'Español',
        'ru-RU': 'Русский'
    };
    
    Object.entries(languages).forEach(([lang, label]) => {
        const btn = document.createElement('button');
        btn.className = `lang-btn ${lang === currentLanguage ? 'active' : ''}`;
        btn.textContent = label;
        btn.onclick = () => {
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            setLanguage(lang);
        };
        switcher.appendChild(btn);
    });
    
    // 将语言切换器插入到container的开头
    const container = document.querySelector('.container');
    if (container) {
        container.insertBefore(switcher, container.firstChild);
        console.log('Language switcher added to container');
    } else {
        console.error('Container not found');
    }
}

// 初始化国际化
function initI18n() {
    console.log('Initializing i18n');
    
    // 设置下拉框初始值
    const langSelect = document.getElementById('langSelect');
    if (langSelect) {
        langSelect.value = currentLanguage;
        
        // 添加语言切换事件
        langSelect.addEventListener('change', (e) => {
            setLanguage(e.target.value);
        });
    }
    
    // 更新页面内容
    updatePageContent();
}

// 导出需要的函数
window.i18n = {
    t,
    setLanguage,
    getCurrentLanguage: () => currentLanguage,
    init: initI18n,
    updatePageContent
}; 